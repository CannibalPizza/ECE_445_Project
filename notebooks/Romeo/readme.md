# **Romeo's Worklog**
## 2/11/2025 - First Meeting With TA
This day included our first meeting with our TA, Chi Zhang. Prior to the meeting, our group began working thoroughly on the project proposal. This included copying over the template for the proposal, and then writing our ideas down.

By the end of our first meeting before talking to the TA, we wrote down the majority of the problem and solution statements, some visual aids about how we wanted our system to work on an actual door, and then bulleted lists briefly touching on system overview and requirements. We also discussed what clarifying questions to ask the TA.

During the TA meeting we explained our project. We want a box mounted on the door frame to contain an ESP32, which would control a motor that would be able to  swing the door open and closed. This would be controlled by a remote that the user can pair to that ESP32 with another ESP32 in the remote. The user would be able to connect to multiple of these door systems, so that they can open/close whatever doors in their house they please. Each door system would also include a battery-powered door handle. This handle would replace the old handle and would contain another ESP32 that can communicate with the door. With this the door would be able to open without the latch preventing the opening. The TA suggested making more quantitative requirements, such as door weight requirements and timing with signals and opening. We were also told to email the professor about how we would go about demoing the door, since we would find it difficult demoing on an actual door.

## 2/13/2025 - Proposal Completion and Machine Workshop
We met with the Machine Workshop early in the afternoon to discuss the work that can be done for our project. This was due to us emailing the professor asking about how to go about demoing our project. Within the email we clarified the project idea, since there was plenty of confusion about our intentions. The professor suggested that we demo on a model door.

The Machine Shop already had a model door that was about 5 lbs and dimensions of21 x 13 inches. We also determined that the Machine Shop can provide us with the boxes that contain the circuitry for all subsystems (door opener, latch, and remote). They will also be able to attach the boxes and motors onto the door that need to be attached.

We changed the project to be based around what we will demo by the end of the semester. This means that we won't have an internal system for the handle anymore, and instead we will have a box with an actuating latch attached on the frame of the door. This way we can still emulate what the door handle was supposed to dowith the original idea. We also determined that since we will only have one door, then we can create another system not attached to any door just to demonstrate that the remote can attached to multiple systems if needed. These changes were shown in the visual aids and block diagrams created by my partners. I focused on clarifying the problem and solution statements in the project proposal. We also talked about timings and worked that the signals should be transferred between the 3 subsystems in a quarter of second. We also determined that the door should open in about 3 seconds, which we did tolerance analysis to determine the motor needed. We determined the parts we needed after figuring our the voltages that multiple necessary parts needed (motor, solenoid latch, ESP32, etc.) and finished the project proposal.

## 2/19/2025 - Proposal Review
We presented our proposal to the TA and professor. The project was approved due to the complexity and scope of the project. However, we missed out on including some circuitry in our subsystems overviews and block diagrams. This demonstrated that we needed to do more research about how the signals were to be send and received. We did not know what needed to drive the motor. The proofessor suggested considering at an H-bridge to start for driving the motor. He also said to that we can use an LDO to step-down the voltage inside of the remote from 3.6V to 3.3V, since the change in voltage is quite small.

## 2/24/2025 - Motor Driver Discussion
I was not present for the meeting between my partners, but they researched into the H-bridge. They informed me afterwards how we can use the ports from the ESP32 and we can control the direction and speed of the motor using the H-bridge. We also discussed about when we can start meeting more frequently in order to make significant progress in the project, since we got ahead on other work. Lastly, we talked about other research that we can perfrom about circuitry that should have been included in the block diagram. This included additional research into the circuitry that will have to be performed within the remote for displaying the door numbers and LEDs.

## 2/25/2025 - H-Bridge and Door System Designing
I met with Love so that we could further discuss the motor driver and possibly draw up some schematics. We looked up specific parts that we would need in order to implement the H-Bridge discussed from the previous day and we drew designs after determining how the ESP32 would connect to the motor. We decided on a simple H-Bridge that is similar to design from ECE 110 for the light-seeking car project. We realize the simplicity of the design may result in some faults, which will be addressed once designing the PCB for the door opening subsystem. Additionally, I redrew our block diagram for this specific subsystem for future reference, which will allow us to quickly realize all the necessary connections between the power, ESP32, voltage regulators, H-bridge, and motor.

We also devoted some time to further clarify on other details of the project, which includes all the bluetooth connections. From what we understand, there are configuration files for the ESP32 that will allow us to specify what the device can connect to. We were able to figure out that we can treat the remote as a server with all the door systems (door opener and latch) as clients. We believe that we can configure the names for the devices to allow the doors to only look for the remote and the remote to only be able to seek doors. The doors will constantly be looking to pair to a device (searching), while the remote will be able to find the doors once the bluetooth button is pushed. This helps us determine what we want each button on the remote to do. Currently we will have the blue LED blink while searching and then a solid color once a door is found. The open/close button will be used to select which door number on the remote that door will be assigned to.

Lastly, we met with our TA and shared our progress. We discussed the flow of the BlueTooth signals, where we believe the original flow of remote-door opener-door latch-door opener-remote would be most suitable simply because of weird BlueTooth configuration that would have to be done with the latch otherwise.

## 2/26/2025 - Remote PCB Designing
I met with Love to try and reach the PCB designing stages for at least one of our subsystems. Today, we determined the little differences that would need to be present between each of the PCBs for our subsystems. I worked with Love to figure out what the parts needed for the actual remote PCB would be. This way he could start putting the necessary parts down in KiCad. This includes the connectors needed for the buttons, LED, coin battery, and 7-segment display. We also placed down the needed LDO regulator and ESP32. Particulary, the 7-segment display connector may still be incorrect as we are unsure if we can find a way to connect the display without having to sauter it. We believe that we can use some headers and wires to connect the connector and display since they both have pins. We also found a coin battery holder online that will be able to handle the 3.6V coin battery that we have selected.

## 2/27/2025 - Door Latch PCB Designing
We met again today to finish another design, so I can go the PCB review and get some feedback about our designs at the very least. We were able to design the door latch fairly quickly since the design is the simplest out of all the subsystems. We determined that we could use an NMOS gate to control whether the latch is pulled in or pushed out. This required us to find the appropriate NMOS gate which could react to a 3.3V gate input and a 12V difference between the drain and source. We also decided to add another input into the ESP32 from the control gate as a redundant signal to confirm that the latch has retracted when receiving 12V. This means that we would need another voltage regulator to bring this 12V down to 3.3V. Other than this decision, the rest of the design remained the same, which led to us being able to quickly finish a schematic to demonstrate at the PCB review.

## 2/28/2025 - PCB Review
Alex and I met with a TA at the PCB review, where we found that, for the most part, our designs should be fine. He let us know some places where we should be aware of some failure. Firstly, we need to ensure that there is a way to properly program the board, which is where he suggested UART which should work fine for our project. Secondly, he said that there is a chance that we could use voltage divider rather than a voltage regulator. There may be a power and current issue with the regulators in the latch subsystem. Lastly, he told us to check the datasheets for the regulators because he believes that we were going to need decoupling capacitors around them.

## 3/04/2025 - Weekly TA Meeting
We met with our TA for the weekly TA meeting, as we have not been able to put in a good amount of work for our project. After going to the PCB review, we made some changes to a couple of our regulators by adding some capacitors. We also talked to our TA to figure out how to go about programming for our PCBs or our devkits. We figured that we would have to come in during office hours to pick up a programmer from one of the TAs. We also talked to our TA about buying components and methods of testing for our system. He also informed us that we had an upcoming breadboard demo.

## 3/05/2025 - Begin On Design Document
At this point we had made sure we started the design document by copying over things from our previous documents over to the design document. As a group, we talked about our project more in depth so that we could finalize our design. We talked about methods of powering each of our subsystems, such as having 8 AA batteries for the latch, a 3.6V coin batter for the remote, and using wall power for the door system. We also made sure to include the new H-bridge to drive the motor driver, and we double checked that the driver can output 12V for the motor and take 3.3V inputs from the ESP32 for controls.

## 3/06/2025 - Finalize Design Document
This day we made sure that everything was written down in the design document. I helped work on the rest of the writing needed for each of the subsystem parts. Additionally, I helped Love look up all the parts so we can get the links and prices for everything to determine the cost of the system. Lastly, we came together to discuss a schedule for the rest of the semester.

## 3/07/2025 - Office Hours For Programming
Love and I went to office hours to talk to a TA about programming the PCBs. He mentioned that we should add the UART schematic to each of our design schematics, so we could have a method of programming each of the PCBs. Love also checked out one of the UART programmers for us, so that we could have a way programming our devkits.

## 3/10/2025-3/11/2025 - Breadboard Demo
Over these two days we worked on the breadboard design and setup for the demo. Over these two days, I strictly focused on how to get Bluetooth working on either of the two devkits that we had bought. The original plan was to have a button interact with one of the devkits and then it would send a signal to the other devkit telling it to power a pair of NMOS gates, which would allow current to flow and turn on our motor. This would involve me figuring out how to use the devkits and programming them with a basic BlueTooth Classic connection. One issue that we had faced is discovering which pins we could use for outputs and inputs since some of the voltages from one pin would interfere with another. As we had worked further with this design, we had realized that the voltage provided by the ESP32 would not be enough for the NMOS gates to open. We were able to demo the motor spinning as a separate part of our breadboard design, and have the ESP32 turn on an LED. This would have been fine, but I was not able to get the ESP32s to connect to one another with the BlueTooth Classic connection. Alex had figured out a method of connecting to the ESP32s with a mobile application. After figuring out the application and making one ESP32 a server and the other a client, we settled on a design for our demo. We would push a button which would send a signal to our device, and then from our device send a signal to the other ESP32 to turn on the LED. The struggles I esperienced with the BlueTooth Classic had only confirmed that I would use BlueTooth Low Energy for doing an ESP32-to-ESP32 connection. We demoed our final breadboard design while explaining what worked well and what issues we faced.

## 3/12/2025 - 2nd Wave PCBs
We made sure to add the schematics for programming into our schematic and PCB designs. Additionally we had to double check that the ESP32s that we would get from the ECEB would be the same as the one we had our design schematic. This turned out to be wrong, so we had to fix that along with the UART progamming. Additionally, we had to make sure we agreed on the hex display connectors that we end up using for our final remote design.

## 3/14/2025 - Machine Shop Boxes
Love and I went to the Machine Shop to discuss the boxes that they would provide for us for our final design. They had told us earlier in the year that they would be able to provide the boxes for us and give us velcro strips to mount the boxes onto the door. Love and I had recorded the dimensions of each of the PCBs, however they had told us to just come back after we have the PCBs in hand. We made sure to hand the motor and solenoid latch over to them so they could mount those parts onto the door.

## 3/31/2025 - Changes to PCB + BlueTooth Progress
Love and Alex had discussed about changing the PCB for the next wave for the door subsystem. As a precaution, the current design just had a connector for the VIN, but they had decided on using a wall adapter, which required the ordering a jack and the adapter. Additionally by this point, I had run multiple tests on the devkits for getting a bluetooth connection between the two devkits. I had figured out that one of the kits needed to be established as a server, while the other one would be a client. The server would have services and characteristics that the client could search for. Once found and connected the two could interact through these characteristics if they were given read and write capabilities. At this point, my other two groupmates had been attempting to complete soldering the PCBs for each of the subsytems. This would result in occasional voltage tests where I would help out. I have an image attached in the notebook that demonstrates the hierarchy of the BlueTooth Low Energy connections.

## 4/15/2025 - PCBs for the Machine Shop
Love and I went to the machine shop to give them the parts that would go into each of the boxes and one copy of each of the PCBs. This way they could order the boxes to house our PCBs. Love and I discussed beforehand all the holes that would be needed for things such as wires, buttons, LEDs, etc. We also have to give them and explain the parts that would go where, so they could put in a couple of the parts into the boxes for us, such as the hex display.

## 4/17/2025 - Continuation of PCB Implementation
At this point my group had been implementing each of the PCBs and trying to program any of my tests onto the actual PCBs. I had created tests for both the door and latch subsystems. The door test would repeatedly open and close the door by spinning the motor in one direction and then in the other direction for a few seconds. My latch test would retract the latch for 5 seconds and then extend the latch for 5 seconds. With these tests we would be able to see if the door and latch PCBs would be working if they were programmed correctly. We frequently were unable to program the PCBs due to improper connections with the UART. My group had decided to resolder a few of the PCBs, which resulted in the PCBs eventually being programmable. They also placed a new order for the latch and remote PCB for the 4th round to fix a few mistakes such as having vias on some of the pads. By this point I had some basic code for each of the three subsystem logic, but it did not include any of the BlueTooth Low Energy servers and characteristics that I had figured out. I had designed the logic for switching the number on the hex display and having the buttons perform their actions.

## 4/22/2025 - Setting up For Mock Demo
In order to have something working for our project demo, we tried to put the current remote code onto the remote PCB and the latch test onto the latch. We were able to program the remote with the current code I had implemented but the latch for some reason was not working properly. So we had to reprogram the latch again afterwards to determine if that was the issue. We determined that there was a bad solder joint on the latch PCB, so my groupmates were going to resolder the latch again.

## 4/30/2025 - Finalizing Design and Implementation
For the week leading up to our final demo we had finalized a design that would work with our remaining operational parts. We originally wanted the logic on the remote to target multiple door and latch subsystems with the single remote. However, we had accidently burned out one of our door PCBs so we were only down to one. Additionally we had burned out our second motor, so we had settled on only having one door and latch combination. However, all of our latches and parts were ready and just needed to be programmed. I have been working on integrating all the BlueTooth into the code for each subsystem. The latch needed logic to read from and to the remote based off the current latch state. The remote ran all the timing for the door, and it told the door and latch when they should be opening based off of signals received from each subsystem. The remote also contained logic for the states of each door, pairing, and hex display. Lastly, the door logic would just spin the door forward or backward for a certain amount of time based off of if the door had received a signal. One major change was resorting to timing methods for the door open and close speed. Our original plan was to use the encoder to figure out the door's position, which would also allow us to figure out if the door was stuck. This would allow us to implement safety features that prevents the door from closing on someone or something. Other than that we were able to get a fully working door that could pair to a remote and swing open and close repeatedly.

## 5/08/2025 - Finishing Assignments
Over the last week we had been working on the presentation and paper, by referencing our design document. I have been helping my teammates by just adding some slides to the presentation and adding some content to the final paper. Some of the content I added to the final paper includes logic changes from the code, which includes the failure of adding the safety and more detail of the BlueTooth logic. Lastly, I finished adding this last entry and the final versions of the code into my notebook.
